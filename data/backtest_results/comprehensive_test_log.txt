2025-12-04 09:44:00,187 - INFO - Loading data from C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\raw\market\ES_1min_databento.csv
2025-12-04 09:44:02,323 - INFO - Loaded 684,410 raw 1-minute bars
2025-12-04 09:44:02,485 - INFO - After RTH filter: 191,426 bars
2025-12-04 09:44:02,523 - INFO - Resampled from 684,410 to 38,286 bars (5min)
2025-12-04 09:44:02,524 - INFO - Resampled to 38,286 5-min bars
2025-12-04 09:44:06,707 - WARNING - fredapi not installed. Run: pip install fredapi
2025-12-04 09:44:06,708 - INFO - FeaturePipeline initialized for ES
2025-12-04 09:44:06,708 - INFO - Data shape: (38286, 5)
2025-12-04 09:44:06,708 - INFO - Date range: 2023-01-03 09:30:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 09:44:06,708 - INFO - Starting full feature calculation...
2025-12-04 09:44:06,708 - INFO - Calculating Category 1: Price-Based Features...
2025-12-04 09:44:06,709 - INFO - Calculating all price-based features...
2025-12-04 09:44:09,421 - INFO - Generated 37 price-based features
2025-12-04 09:44:09,421 - INFO - Calculating Category 2: Technical Indicators...
2025-12-04 09:44:09,423 - INFO - Calculating all technical indicators...
2025-12-04 09:44:12,884 - INFO - Generated 104 technical indicator features
2025-12-04 09:44:12,884 - INFO - Calculating Category 7: Seasonality & Calendar...
2025-12-04 09:44:12,914 - INFO - Calculating Category 9: Regime & Fractal Features...
2025-12-04 09:44:32,878 - INFO - Calculating Category 4: Microstructure Features...
2025-12-04 09:44:32,878 - INFO - Calculating microstructure features...
2025-12-04 09:44:37,152 - INFO - Generated 62 microstructure features
2025-12-04 09:44:37,152 - INFO - Calculating Advanced Targets (Pyramiding, DDCA, S/R)...
2025-12-04 09:44:37,152 - INFO - Calculating advanced targets and S/R features...
2025-12-04 09:44:37,332 - INFO - Generated 115 advanced features
2025-12-04 09:44:37,416 - INFO - Calculating Category 11: Lagged Features...
2025-12-04 09:44:43,175 - INFO - Calculating Category 12: Interaction Features...
2025-12-04 09:44:43,249 - INFO - Calculating Category 13: Target Labels...
2025-12-04 09:44:43,562 - INFO - Total features generated: 412
2025-12-04 09:44:43,571 - INFO - Features with NaN: 251
2025-12-04 09:44:43,583 - INFO - Built 412 features for 38286 samples (before NaN drop)
2025-12-04 09:44:43,914 - INFO - After NaN handling: 37986 samples
2025-12-04 09:44:43,916 - INFO - Using 75 selected features from rankings
2025-12-04 09:44:43,917 - INFO - ======================================================================
2025-12-04 09:44:43,917 - INFO - COMPREHENSIVE WALK-FORWARD BACKTEST: LIGHTGBM
2025-12-04 09:44:43,917 - INFO - ======================================================================
2025-12-04 09:44:44,033 - INFO - RTH filter: 37,986 -> 37,986 bars
2025-12-04 09:44:44,080 - INFO - RTH Filter Applied: 37,986 bars remaining
2025-12-04 09:44:44,098 - INFO - Data leakage check passed
2025-12-04 09:44:44,098 - INFO - Data: 37,986 bars
2025-12-04 09:44:44,098 - INFO - Date Range: 2023-01-06 15:00:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 09:44:44,098 - INFO - Features: 75
2025-12-04 09:44:44,098 - INFO - 
Walk-Forward Configuration:
2025-12-04 09:44:44,098 - INFO -   Train Window:  180 days (14,040 bars)
2025-12-04 09:44:44,098 - INFO -   Test Window:   5 days (390 bars)
2025-12-04 09:44:44,098 - INFO -   Embargo:       42 bars
2025-12-04 09:44:44,098 - INFO -   Expected Folds: 61
2025-12-04 09:44:44,426 - INFO - Fold 1/61: 58 trades, Fold P&L: $15,335.00, Cumulative: $15,335.00
2025-12-04 09:44:46,274 - INFO - Fold 5/61: 58 trades, Fold P&L: $16,222.50, Cumulative: $73,472.50
2025-12-04 09:44:48,993 - INFO - Fold 10/61: 57 trades, Fold P&L: $9,015.00, Cumulative: $119,250.00
2025-12-04 09:44:51,432 - INFO - Fold 15/61: 52 trades, Fold P&L: $7,877.50, Cumulative: $164,817.50
2025-12-04 09:44:53,818 - INFO - Fold 20/61: 56 trades, Fold P&L: $6,445.00, Cumulative: $208,467.50
2025-12-04 09:44:56,377 - INFO - Fold 25/61: 57 trades, Fold P&L: $8,590.00, Cumulative: $250,490.00
2025-12-04 09:44:58,747 - INFO - Fold 30/61: 54 trades, Fold P&L: $6,305.00, Cumulative: $307,892.50
2025-12-04 09:45:01,299 - INFO - Fold 35/61: 53 trades, Fold P&L: $11,197.50, Cumulative: $355,760.00
2025-12-04 09:45:03,586 - INFO - Fold 40/61: 52 trades, Fold P&L: $15,252.50, Cumulative: $409,245.00
2025-12-04 09:45:05,833 - INFO - Fold 45/61: 52 trades, Fold P&L: $17,402.50, Cumulative: $499,745.00
2025-12-04 09:45:08,034 - INFO - Fold 50/61: 56 trades, Fold P&L: $8,820.00, Cumulative: $570,905.00
2025-12-04 09:45:10,080 - INFO - Fold 55/61: 56 trades, Fold P&L: $15,932.50, Cumulative: $639,600.00
2025-12-04 09:45:12,232 - INFO - Fold 60/61: 57 trades, Fold P&L: $7,515.00, Cumulative: $701,272.50
2025-12-04 09:45:12,939 - INFO - 
======================================================================
2025-12-04 09:45:12,939 - INFO - BACKTEST COMPLETE
2025-12-04 09:45:12,939 - INFO - ======================================================================
2025-12-04 09:45:12,939 - INFO - Total Trades:     3385
2025-12-04 09:45:12,939 - INFO - Net P&L:          $712,475.00
2025-12-04 09:45:12,939 - INFO - Win Rate:         86.0%
2025-12-04 09:45:12,939 - INFO - Profit Factor:    18.17
2025-12-04 09:45:12,939 - INFO - Sharpe Ratio:     42.68
2025-12-04 09:45:12,939 - INFO - Max Drawdown:     $2,257.50 (0.3%)
2025-12-04 09:45:13,164 - INFO - All results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 09:45:13,165 - INFO - ======================================================================
2025-12-04 09:45:13,165 - INFO - COMPREHENSIVE WALK-FORWARD BACKTEST: XGBOOST
2025-12-04 09:45:13,165 - INFO - ======================================================================
2025-12-04 09:45:13,313 - INFO - RTH filter: 37,986 -> 37,986 bars
2025-12-04 09:45:13,363 - INFO - RTH Filter Applied: 37,986 bars remaining
2025-12-04 09:45:13,388 - INFO - Data leakage check passed
2025-12-04 09:45:13,388 - INFO - Data: 37,986 bars
2025-12-04 09:45:13,389 - INFO - Date Range: 2023-01-06 15:00:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 09:45:13,389 - INFO - Features: 75
2025-12-04 09:45:13,389 - INFO - 
Walk-Forward Configuration:
2025-12-04 09:45:13,389 - INFO -   Train Window:  180 days (14,040 bars)
2025-12-04 09:45:13,389 - INFO -   Test Window:   5 days (390 bars)
2025-12-04 09:45:13,389 - INFO -   Embargo:       42 bars
2025-12-04 09:45:13,389 - INFO -   Expected Folds: 61
2025-12-04 09:45:14,002 - INFO - Fold 1/61: 57 trades, Fold P&L: $15,177.50, Cumulative: $15,177.50
2025-12-04 09:45:16,582 - INFO - Fold 5/61: 58 trades, Fold P&L: $14,985.00, Cumulative: $69,565.00
2025-12-04 09:45:19,968 - INFO - Fold 10/61: 57 trades, Fold P&L: $9,365.00, Cumulative: $117,242.50
2025-12-04 09:45:23,369 - INFO - Fold 15/61: 52 trades, Fold P&L: $9,202.50, Cumulative: $167,130.00
2025-12-04 09:45:26,839 - INFO - Fold 20/61: 56 trades, Fold P&L: $8,395.00, Cumulative: $214,160.00
2025-12-04 09:45:30,159 - INFO - Fold 25/61: 57 trades, Fold P&L: $9,602.50, Cumulative: $255,225.00
2025-12-04 09:45:33,472 - INFO - Fold 30/61: 54 trades, Fold P&L: $6,792.50, Cumulative: $317,465.00
2025-12-04 09:45:36,752 - INFO - Fold 35/61: 53 trades, Fold P&L: $10,985.00, Cumulative: $362,645.00
2025-12-04 09:45:39,951 - INFO - Fold 40/61: 52 trades, Fold P&L: $15,790.00, Cumulative: $416,392.50
2025-12-04 09:45:43,025 - INFO - Fold 45/61: 52 trades, Fold P&L: $17,315.00, Cumulative: $507,792.50
2025-12-04 09:45:46,284 - INFO - Fold 50/61: 56 trades, Fold P&L: $8,745.00, Cumulative: $578,542.50
2025-12-04 09:45:49,422 - INFO - Fold 55/61: 56 trades, Fold P&L: $16,120.00, Cumulative: $645,980.00
2025-12-04 09:45:52,492 - INFO - Fold 60/61: 57 trades, Fold P&L: $7,890.00, Cumulative: $707,435.00
2025-12-04 09:45:53,215 - INFO - 
======================================================================
2025-12-04 09:45:53,215 - INFO - BACKTEST COMPLETE
2025-12-04 09:45:53,215 - INFO - ======================================================================
2025-12-04 09:45:53,215 - INFO - Total Trades:     3395
2025-12-04 09:45:53,215 - INFO - Net P&L:          $718,137.50
2025-12-04 09:45:53,215 - INFO - Win Rate:         86.3%
2025-12-04 09:45:53,215 - INFO - Profit Factor:    19.40
2025-12-04 09:45:53,215 - INFO - Sharpe Ratio:     42.63
2025-12-04 09:45:53,215 - INFO - Max Drawdown:     $1,485.00 (0.2%)
2025-12-04 09:45:53,399 - INFO - All results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 09:45:53,497 - INFO - ============================================================
2025-12-04 09:45:53,497 - INFO - RUNNING QUALITY CONTROL VALIDATION
2025-12-04 09:45:53,497 - INFO - ============================================================
2025-12-04 09:45:53,497 - INFO - 
1. Validating data quality...
2025-12-04 09:45:53,497 - INFO - 
2. Validating feature quality...
2025-12-04 09:45:54,197 - INFO - 
4. Validating backtest results...
2025-12-04 09:45:54,337 - ERROR - Quality control failed: 'charmap' codec can't encode characters in position 316-317: character maps to <undefined>
2025-12-04 09:45:54,419 - WARNING - ONNX not installed. Install with: pip install onnx skl2onnx
2025-12-04 09:45:54,419 - INFO - Using device: cpu
2025-12-04 09:45:54,434 - INFO - ============================================================
2025-12-04 09:45:54,434 - INFO - PURGED CV TRAINING: LSTM
2025-12-04 09:45:54,434 - INFO - ============================================================
2025-12-04 09:45:54,454 - INFO - Data shape: X=(37986, 75), y=(37986,)
2025-12-04 09:45:54,455 - INFO - Features: 75
2025-12-04 09:45:54,499 - INFO - CV Type: purged
2025-12-04 09:45:54,501 - INFO - N Splits: 5
2025-12-04 09:45:54,501 - INFO - Purge Bars: 200
2025-12-04 09:45:54,501 - INFO - Embargo Bars: 42
2025-12-04 09:45:54,507 - INFO - 
--- Fold 1/5 ---
2025-12-04 09:45:54,507 - INFO - Train: 30,347 samples, Test: 7,597 samples
2025-12-04 09:46:42,588 - INFO - Fold 1: Early stopping at epoch 16
2025-12-04 09:46:42,827 - INFO - Fold 1 Results:
2025-12-04 09:46:42,827 - INFO -   AUC-ROC:  0.6633
2025-12-04 09:46:42,827 - INFO -   Accuracy: 0.6218
2025-12-04 09:46:42,827 - INFO -   F1 Score: 0.6068
2025-12-04 09:46:42,827 - INFO -   Epochs:   16
2025-12-04 09:46:42,836 - INFO - 
--- Fold 2/5 ---
2025-12-04 09:46:42,837 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:47:33,097 - INFO - Fold 2: Early stopping at epoch 16
2025-12-04 09:47:33,356 - INFO - Fold 2 Results:
2025-12-04 09:47:33,356 - INFO -   AUC-ROC:  0.6697
2025-12-04 09:47:33,356 - INFO -   Accuracy: 0.6268
2025-12-04 09:47:33,356 - INFO -   F1 Score: 0.6304
2025-12-04 09:47:33,356 - INFO -   Epochs:   16
2025-12-04 09:47:33,368 - INFO - 
--- Fold 3/5 ---
2025-12-04 09:47:33,368 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:48:21,843 - INFO - Fold 3: Early stopping at epoch 15
2025-12-04 09:48:22,081 - INFO - Fold 3 Results:
2025-12-04 09:48:22,082 - INFO -   AUC-ROC:  0.6615
2025-12-04 09:48:22,082 - INFO -   Accuracy: 0.6216
2025-12-04 09:48:22,082 - INFO -   F1 Score: 0.6337
2025-12-04 09:48:22,082 - INFO -   Epochs:   15
2025-12-04 09:48:22,090 - INFO - 
--- Fold 4/5 ---
2025-12-04 09:48:22,092 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:49:04,209 - INFO - Fold 4: Early stopping at epoch 14
2025-12-04 09:49:04,432 - INFO - Fold 4 Results:
2025-12-04 09:49:04,432 - INFO -   AUC-ROC:  0.6554
2025-12-04 09:49:04,432 - INFO -   Accuracy: 0.6120
2025-12-04 09:49:04,432 - INFO -   F1 Score: 0.6121
2025-12-04 09:49:04,432 - INFO -   Epochs:   14
2025-12-04 09:49:04,450 - INFO - 
--- Fold 5/5 ---
2025-12-04 09:49:04,450 - INFO - Train: 30,188 samples, Test: 7,597 samples
2025-12-04 09:49:53,580 - INFO - Fold 5: Early stopping at epoch 16
2025-12-04 09:49:53,813 - INFO - Fold 5 Results:
2025-12-04 09:49:53,813 - INFO -   AUC-ROC:  0.6631
2025-12-04 09:49:53,813 - INFO -   Accuracy: 0.6262
2025-12-04 09:49:53,813 - INFO -   F1 Score: 0.6377
2025-12-04 09:49:53,813 - INFO -   Epochs:   16
2025-12-04 09:49:53,813 - INFO - 
============================================================
2025-12-04 09:49:53,813 - INFO - CROSS-VALIDATION RESULTS
2025-12-04 09:49:53,813 - INFO - ============================================================
2025-12-04 09:49:53,813 - INFO - Mean AUC-ROC:  0.6626 (+/- 0.0046)
2025-12-04 09:49:53,813 - INFO - Mean Accuracy: 0.6217 (+/- 0.0053)
2025-12-04 09:49:53,813 - INFO - Mean F1:       0.6241
2025-12-04 09:49:53,813 - INFO - Mean Log Loss: 0.6544
2025-12-04 09:49:53,813 - INFO - Avg Epochs:    15.4
2025-12-04 09:49:53,832 - INFO - Results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 09:49:53,832 - INFO - ============================================================
2025-12-04 09:49:53,832 - INFO - PURGED CV TRAINING: GRU
2025-12-04 09:49:53,832 - INFO - ============================================================
2025-12-04 09:49:53,871 - INFO - Data shape: X=(37986, 75), y=(37986,)
2025-12-04 09:49:53,871 - INFO - Features: 75
2025-12-04 09:49:53,932 - INFO - CV Type: purged
2025-12-04 09:49:53,932 - INFO - N Splits: 5
2025-12-04 09:49:53,932 - INFO - Purge Bars: 200
2025-12-04 09:49:53,932 - INFO - Embargo Bars: 42
2025-12-04 09:49:53,942 - INFO - 
--- Fold 1/5 ---
2025-12-04 09:49:53,942 - INFO - Train: 30,347 samples, Test: 7,597 samples
2025-12-04 09:50:46,699 - INFO - Fold 1: Early stopping at epoch 14
2025-12-04 09:50:46,989 - INFO - Fold 1 Results:
2025-12-04 09:50:46,989 - INFO -   AUC-ROC:  0.6715
2025-12-04 09:50:46,989 - INFO -   Accuracy: 0.6342
2025-12-04 09:50:46,989 - INFO -   F1 Score: 0.6488
2025-12-04 09:50:46,989 - INFO -   Epochs:   14
2025-12-04 09:50:47,000 - INFO - 
--- Fold 2/5 ---
2025-12-04 09:50:47,000 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:51:46,678 - INFO - Fold 2: Early stopping at epoch 16
2025-12-04 09:51:46,962 - INFO - Fold 2 Results:
2025-12-04 09:51:46,962 - INFO -   AUC-ROC:  0.6767
2025-12-04 09:51:46,962 - INFO -   Accuracy: 0.6286
2025-12-04 09:51:46,962 - INFO -   F1 Score: 0.6507
2025-12-04 09:51:46,962 - INFO -   Epochs:   16
2025-12-04 09:51:46,962 - INFO - 
--- Fold 3/5 ---
2025-12-04 09:51:46,962 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:52:57,564 - INFO - Fold 3: Early stopping at epoch 19
2025-12-04 09:52:57,931 - INFO - Fold 3 Results:
2025-12-04 09:52:57,931 - INFO -   AUC-ROC:  0.6639
2025-12-04 09:52:57,931 - INFO -   Accuracy: 0.6202
2025-12-04 09:52:57,931 - INFO -   F1 Score: 0.6492
2025-12-04 09:52:57,931 - INFO -   Epochs:   19
2025-12-04 09:52:57,941 - INFO - 
--- Fold 4/5 ---
2025-12-04 09:52:57,941 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 09:54:13,114 - INFO - Fold 4: Early stopping at epoch 19
2025-12-04 09:54:13,376 - INFO - Fold 4 Results:
2025-12-04 09:54:13,376 - INFO -   AUC-ROC:  0.6562
2025-12-04 09:54:13,376 - INFO -   Accuracy: 0.6167
2025-12-04 09:54:13,376 - INFO -   F1 Score: 0.6107
2025-12-04 09:54:13,376 - INFO -   Epochs:   19
2025-12-04 09:54:13,385 - INFO - 
--- Fold 5/5 ---
2025-12-04 09:54:13,385 - INFO - Train: 30,188 samples, Test: 7,597 samples
2025-12-04 09:55:02,738 - INFO - Fold 5: Early stopping at epoch 13
2025-12-04 09:55:03,009 - INFO - Fold 5 Results:
2025-12-04 09:55:03,009 - INFO -   AUC-ROC:  0.6682
2025-12-04 09:55:03,009 - INFO -   Accuracy: 0.6291
2025-12-04 09:55:03,009 - INFO -   F1 Score: 0.6419
2025-12-04 09:55:03,009 - INFO -   Epochs:   13
2025-12-04 09:55:03,009 - INFO - 
============================================================
2025-12-04 09:55:03,009 - INFO - CROSS-VALIDATION RESULTS
2025-12-04 09:55:03,009 - INFO - ============================================================
2025-12-04 09:55:03,011 - INFO - Mean AUC-ROC:  0.6673 (+/- 0.0070)
2025-12-04 09:55:03,011 - INFO - Mean Accuracy: 0.6258 (+/- 0.0064)
2025-12-04 09:55:03,011 - INFO - Mean F1:       0.6403
2025-12-04 09:55:03,011 - INFO - Mean Log Loss: 0.6514
2025-12-04 09:55:03,011 - INFO - Avg Epochs:    16.2
2025-12-04 09:55:03,018 - INFO - Results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
