2025-12-04 10:40:43,663 - INFO - Loading data from C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\raw\market\ES_1min_databento.csv
2025-12-04 10:40:45,734 - INFO - Loaded 684,410 raw 1-minute bars
2025-12-04 10:40:45,891 - INFO - After RTH filter: 191,426 bars
2025-12-04 10:40:45,926 - INFO - Resampled from 684,410 to 38,286 bars (5min)
2025-12-04 10:40:45,927 - INFO - Resampled to 38,286 5-min bars
2025-12-04 10:40:50,035 - WARNING - fredapi not installed. Run: pip install fredapi
2025-12-04 10:40:50,035 - INFO - FeaturePipeline initialized for ES
2025-12-04 10:40:50,035 - INFO - Data shape: (38286, 5)
2025-12-04 10:40:50,035 - INFO - Date range: 2023-01-03 09:30:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 10:40:50,035 - INFO - Starting full feature calculation...
2025-12-04 10:40:50,035 - INFO - Calculating Category 1: Price-Based Features...
2025-12-04 10:40:50,035 - INFO - Calculating all price-based features...
2025-12-04 10:40:52,523 - INFO - Generated 37 price-based features
2025-12-04 10:40:52,523 - INFO - Calculating Category 2: Technical Indicators...
2025-12-04 10:40:52,524 - INFO - Calculating all technical indicators...
2025-12-04 10:40:56,235 - INFO - Generated 104 technical indicator features
2025-12-04 10:40:56,235 - INFO - Calculating Category 7: Seasonality & Calendar...
2025-12-04 10:40:56,257 - INFO - Calculating Category 9: Regime & Fractal Features...
2025-12-04 10:41:15,251 - INFO - Calculating Category 4: Microstructure Features...
2025-12-04 10:41:15,251 - INFO - Calculating microstructure features...
2025-12-04 10:41:18,738 - INFO - Generated 62 microstructure features
2025-12-04 10:41:18,738 - INFO - Calculating Advanced Targets (Pyramiding, DDCA, S/R)...
2025-12-04 10:41:18,739 - INFO - Calculating advanced targets and S/R features...
2025-12-04 10:41:18,929 - INFO - Generated 126 advanced features
2025-12-04 10:41:19,031 - INFO - Calculating Category 11: Lagged Features...
2025-12-04 10:41:24,649 - INFO - Calculating Category 12: Interaction Features...
2025-12-04 10:41:24,743 - INFO - Calculating Category 13: Target Labels...
2025-12-04 10:41:25,075 - INFO - Total features generated: 423
2025-12-04 10:41:25,086 - INFO - Features with NaN: 255
2025-12-04 10:41:25,096 - INFO - Built 423 features for 38286 samples (before NaN drop)
2025-12-04 10:41:25,403 - INFO - After NaN handling: 37986 samples
2025-12-04 10:41:25,403 - INFO - Using 75 selected features from rankings
2025-12-04 10:41:25,429 - INFO - ======================================================================
2025-12-04 10:41:25,429 - INFO - COMPREHENSIVE WALK-FORWARD BACKTEST: LIGHTGBM
2025-12-04 10:41:25,429 - INFO - ======================================================================
2025-12-04 10:41:25,552 - INFO - RTH filter: 37,986 -> 37,986 bars
2025-12-04 10:41:25,584 - INFO - RTH Filter Applied: 37,986 bars remaining
2025-12-04 10:41:25,600 - INFO - Data leakage check passed
2025-12-04 10:41:25,600 - INFO - Data: 37,986 bars
2025-12-04 10:41:25,600 - INFO - Date Range: 2023-01-06 15:00:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 10:41:25,600 - INFO - Features: 75
2025-12-04 10:41:25,600 - INFO - 
Walk-Forward Configuration:
2025-12-04 10:41:25,600 - INFO -   Train Window:  180 days (14,040 bars)
2025-12-04 10:41:25,600 - INFO -   Test Window:   5 days (390 bars)
2025-12-04 10:41:25,600 - INFO -   Embargo:       42 bars
2025-12-04 10:41:25,600 - INFO -   Expected Folds: 61
2025-12-04 10:41:26,000 - INFO - Fold 1/61: 19 trades, Fold P&L: $805.00, Cumulative: $805.00
2025-12-04 10:41:27,869 - INFO - Fold 5/61: 19 trades, Fold P&L: $-470.00, Cumulative: $-1,077.50
2025-12-04 10:41:29,916 - INFO - Fold 10/61: 16 trades, Fold P&L: $420.00, Cumulative: $-3,960.00
2025-12-04 10:41:31,827 - INFO - Fold 15/61: 6 trades, Fold P&L: $407.50, Cumulative: $-635.00
2025-12-04 10:41:34,097 - INFO - Fold 20/61: 6 trades, Fold P&L: $-617.50, Cumulative: $-4,242.50
2025-12-04 10:41:36,340 - INFO - Fold 25/61: 24 trades, Fold P&L: $2,167.50, Cumulative: $-2,142.50
2025-12-04 10:41:38,104 - INFO - Fold 30/61: 8 trades, Fold P&L: $-490.00, Cumulative: $-5,237.50
2025-12-04 10:41:40,101 - INFO - Fold 35/61: 20 trades, Fold P&L: $387.50, Cumulative: $-6,042.50
2025-12-04 10:41:42,291 - INFO - Fold 40/61: 24 trades, Fold P&L: $2,217.50, Cumulative: $-5.00
2025-12-04 10:41:44,563 - INFO - Fold 45/61: 12 trades, Fold P&L: $-110.00, Cumulative: $3,327.50
2025-12-04 10:41:46,371 - INFO - Fold 50/61: 14 trades, Fold P&L: $-1,632.50, Cumulative: $2,667.50
2025-12-04 10:41:48,408 - INFO - Fold 55/61: 16 trades, Fold P&L: $-1,192.50, Cumulative: $95.00
2025-12-04 10:41:50,608 - INFO - Fold 60/61: 17 trades, Fold P&L: $465.00, Cumulative: $-3,052.50
2025-12-04 10:41:51,032 - INFO - 
======================================================================
2025-12-04 10:41:51,032 - INFO - BACKTEST COMPLETE
2025-12-04 10:41:51,032 - INFO - ======================================================================
2025-12-04 10:41:51,032 - INFO - Total Trades:     893
2025-12-04 10:41:51,032 - INFO - Net P&L:          $-4,952.50
2025-12-04 10:41:51,032 - INFO - Win Rate:         45.1%
2025-12-04 10:41:51,032 - INFO - Profit Factor:    0.96
2025-12-04 10:41:51,032 - INFO - Sharpe Ratio:     -0.34
2025-12-04 10:41:51,032 - INFO - Max Drawdown:     $12,832.50 (162.8%)
2025-12-04 10:41:51,102 - INFO - All results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 10:41:51,102 - INFO - ======================================================================
2025-12-04 10:41:51,102 - INFO - COMPREHENSIVE WALK-FORWARD BACKTEST: XGBOOST
2025-12-04 10:41:51,102 - INFO - ======================================================================
2025-12-04 10:41:51,234 - INFO - RTH filter: 37,986 -> 37,986 bars
2025-12-04 10:41:51,288 - INFO - RTH Filter Applied: 37,986 bars remaining
2025-12-04 10:41:51,309 - INFO - Data leakage check passed
2025-12-04 10:41:51,311 - INFO - Data: 37,986 bars
2025-12-04 10:41:51,311 - INFO - Date Range: 2023-01-06 15:00:00-05:00 to 2024-12-19 15:55:00-05:00
2025-12-04 10:41:51,311 - INFO - Features: 75
2025-12-04 10:41:51,311 - INFO - 
Walk-Forward Configuration:
2025-12-04 10:41:51,311 - INFO -   Train Window:  180 days (14,040 bars)
2025-12-04 10:41:51,311 - INFO -   Test Window:   5 days (390 bars)
2025-12-04 10:41:51,311 - INFO -   Embargo:       42 bars
2025-12-04 10:41:51,311 - INFO -   Expected Folds: 61
2025-12-04 10:41:52,175 - INFO - Fold 1/61: 32 trades, Fold P&L: $-897.50, Cumulative: $-897.50
2025-12-04 10:41:55,631 - INFO - Fold 5/61: 21 trades, Fold P&L: $-17.50, Cumulative: $-57.50
2025-12-04 10:41:59,736 - INFO - Fold 10/61: 20 trades, Fold P&L: $725.00, Cumulative: $-3,182.50
2025-12-04 10:42:03,714 - INFO - Fold 15/61: 10 trades, Fold P&L: $-2,300.00, Cumulative: $-7,760.00
2025-12-04 10:42:08,327 - INFO - Fold 20/61: 14 trades, Fold P&L: $-570.00, Cumulative: $-6,422.50
2025-12-04 10:42:12,516 - INFO - Fold 25/61: 8 trades, Fold P&L: $-640.00, Cumulative: $-10,952.50
2025-12-04 10:42:16,759 - INFO - Fold 30/61: 9 trades, Fold P&L: $-820.00, Cumulative: $-12,800.00
2025-12-04 10:42:20,875 - INFO - Fold 35/61: 20 trades, Fold P&L: $-2,400.00, Cumulative: $-18,165.00
2025-12-04 10:42:24,951 - INFO - Fold 40/61: 33 trades, Fold P&L: $672.50, Cumulative: $-17,565.00
2025-12-04 10:42:28,980 - INFO - Fold 45/61: 11 trades, Fold P&L: $-1,792.50, Cumulative: $-16,147.50
2025-12-04 10:42:33,135 - INFO - Fold 50/61: 19 trades, Fold P&L: $-4,020.00, Cumulative: $-13,607.50
2025-12-04 10:42:37,379 - INFO - Fold 55/61: 21 trades, Fold P&L: $-2,292.50, Cumulative: $-18,925.00
2025-12-04 10:42:41,292 - INFO - Fold 60/61: 26 trades, Fold P&L: $682.50, Cumulative: $-21,185.00
2025-12-04 10:42:42,171 - INFO - 
======================================================================
2025-12-04 10:42:42,171 - INFO - BACKTEST COMPLETE
2025-12-04 10:42:42,171 - INFO - ======================================================================
2025-12-04 10:42:42,171 - INFO - Total Trades:     1167
2025-12-04 10:42:42,171 - INFO - Net P&L:          $-24,547.50
2025-12-04 10:42:42,171 - INFO - Win Rate:         46.0%
2025-12-04 10:42:42,171 - INFO - Profit Factor:    0.85
2025-12-04 10:42:42,171 - INFO - Sharpe Ratio:     -1.88
2025-12-04 10:42:42,171 - INFO - Max Drawdown:     $26,337.50 (1471.4%)
2025-12-04 10:42:42,251 - INFO - All results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 10:42:42,302 - INFO - ============================================================
2025-12-04 10:42:42,302 - INFO - RUNNING QUALITY CONTROL VALIDATION
2025-12-04 10:42:42,302 - INFO - ============================================================
2025-12-04 10:42:42,302 - INFO - 
1. Validating data quality...
2025-12-04 10:42:42,309 - INFO - 
2. Validating feature quality...
2025-12-04 10:42:43,099 - INFO - 
4. Validating backtest results...
2025-12-04 10:42:43,131 - ERROR - Quality control failed: 'charmap' codec can't encode character '\u274c' in position 316: character maps to <undefined>
2025-12-04 10:42:43,214 - WARNING - ONNX not installed. Install with: pip install onnx skl2onnx
2025-12-04 10:42:43,226 - INFO - Using device: cpu
2025-12-04 10:42:43,231 - INFO - ============================================================
2025-12-04 10:42:43,231 - INFO - PURGED CV TRAINING: LSTM
2025-12-04 10:42:43,231 - INFO - ============================================================
2025-12-04 10:42:43,255 - INFO - Data shape: X=(37986, 75), y=(37986,)
2025-12-04 10:42:43,255 - INFO - Features: 75
2025-12-04 10:42:43,301 - INFO - CV Type: purged
2025-12-04 10:42:43,301 - INFO - N Splits: 5
2025-12-04 10:42:43,301 - INFO - Purge Bars: 200
2025-12-04 10:42:43,301 - INFO - Embargo Bars: 42
2025-12-04 10:42:43,306 - INFO - 
--- Fold 1/5 ---
2025-12-04 10:42:43,307 - INFO - Train: 30,347 samples, Test: 7,597 samples
2025-12-04 10:43:02,079 - INFO - Fold 1: Early stopping at epoch 6
2025-12-04 10:43:02,316 - INFO - Fold 1 Results:
2025-12-04 10:43:02,316 - INFO -   AUC-ROC:  0.4803
2025-12-04 10:43:02,317 - INFO -   Accuracy: 0.4809
2025-12-04 10:43:02,317 - INFO -   F1 Score: 0.3905
2025-12-04 10:43:02,317 - INFO -   Epochs:   6
2025-12-04 10:43:02,325 - INFO - 
--- Fold 2/5 ---
2025-12-04 10:43:02,325 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 10:43:38,695 - INFO - Fold 2: Early stopping at epoch 12
2025-12-04 10:43:38,978 - INFO - Fold 2 Results:
2025-12-04 10:43:38,978 - INFO -   AUC-ROC:  0.5004
2025-12-04 10:43:38,978 - INFO -   Accuracy: 0.5022
2025-12-04 10:43:38,979 - INFO -   F1 Score: 0.4738
2025-12-04 10:43:38,979 - INFO -   Epochs:   12
2025-12-04 10:43:38,990 - INFO - 
--- Fold 3/5 ---
2025-12-04 10:43:38,990 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 10:43:58,376 - INFO - Fold 3: Early stopping at epoch 6
2025-12-04 10:43:58,653 - INFO - Fold 3 Results:
2025-12-04 10:43:58,653 - INFO -   AUC-ROC:  0.4952
2025-12-04 10:43:58,653 - INFO -   Accuracy: 0.4939
2025-12-04 10:43:58,653 - INFO -   F1 Score: 0.3660
2025-12-04 10:43:58,653 - INFO -   Epochs:   6
2025-12-04 10:43:58,664 - INFO - 
--- Fold 4/5 ---
2025-12-04 10:43:58,664 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 10:44:20,850 - INFO - Fold 4: Early stopping at epoch 7
2025-12-04 10:44:21,101 - INFO - Fold 4 Results:
2025-12-04 10:44:21,101 - INFO -   AUC-ROC:  0.4893
2025-12-04 10:44:21,101 - INFO -   Accuracy: 0.4924
2025-12-04 10:44:21,102 - INFO -   F1 Score: 0.4649
2025-12-04 10:44:21,102 - INFO -   Epochs:   7
2025-12-04 10:44:21,111 - INFO - 
--- Fold 5/5 ---
2025-12-04 10:44:21,111 - INFO - Train: 30,188 samples, Test: 7,597 samples
2025-12-04 10:44:52,458 - INFO - Fold 5: Early stopping at epoch 10
2025-12-04 10:44:52,719 - INFO - Fold 5 Results:
2025-12-04 10:44:52,719 - INFO -   AUC-ROC:  0.4882
2025-12-04 10:44:52,719 - INFO -   Accuracy: 0.4920
2025-12-04 10:44:52,719 - INFO -   F1 Score: 0.4878
2025-12-04 10:44:52,719 - INFO -   Epochs:   10
2025-12-04 10:44:52,720 - INFO - 
============================================================
2025-12-04 10:44:52,720 - INFO - CROSS-VALIDATION RESULTS
2025-12-04 10:44:52,720 - INFO - ============================================================
2025-12-04 10:44:52,720 - INFO - Mean AUC-ROC:  0.4907 (+/- 0.0068)
2025-12-04 10:44:52,720 - INFO - Mean Accuracy: 0.4923 (+/- 0.0068)
2025-12-04 10:44:52,720 - INFO - Mean F1:       0.4366
2025-12-04 10:44:52,720 - INFO - Mean Log Loss: 0.6966
2025-12-04 10:44:52,720 - INFO - Avg Epochs:    8.2
2025-12-04 10:44:52,727 - INFO - Results saved to C:\Users\skoir\SKIE-Ninja-Project\SKIE_Ninja\data\backtest_results
2025-12-04 10:44:52,727 - INFO - ============================================================
2025-12-04 10:44:52,727 - INFO - PURGED CV TRAINING: GRU
2025-12-04 10:44:52,727 - INFO - ============================================================
2025-12-04 10:44:52,764 - INFO - Data shape: X=(37986, 75), y=(37986,)
2025-12-04 10:44:52,764 - INFO - Features: 75
2025-12-04 10:44:52,833 - INFO - CV Type: purged
2025-12-04 10:44:52,834 - INFO - N Splits: 5
2025-12-04 10:44:52,834 - INFO - Purge Bars: 200
2025-12-04 10:44:52,834 - INFO - Embargo Bars: 42
2025-12-04 10:44:52,843 - INFO - 
--- Fold 1/5 ---
2025-12-04 10:44:52,843 - INFO - Train: 30,347 samples, Test: 7,597 samples
2025-12-04 10:45:21,571 - INFO - Fold 1: Early stopping at epoch 7
2025-12-04 10:45:21,874 - INFO - Fold 1 Results:
2025-12-04 10:45:21,874 - INFO -   AUC-ROC:  0.4795
2025-12-04 10:45:21,874 - INFO -   Accuracy: 0.4801
2025-12-04 10:45:21,874 - INFO -   F1 Score: 0.4386
2025-12-04 10:45:21,874 - INFO -   Epochs:   7
2025-12-04 10:45:21,882 - INFO - 
--- Fold 2/5 ---
2025-12-04 10:45:21,882 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 10:46:00,990 - INFO - Fold 2: Early stopping at epoch 10
2025-12-04 10:46:01,289 - INFO - Fold 2 Results:
2025-12-04 10:46:01,289 - INFO -   AUC-ROC:  0.4991
2025-12-04 10:46:01,290 - INFO -   Accuracy: 0.4957
2025-12-04 10:46:01,290 - INFO -   F1 Score: 0.4572
2025-12-04 10:46:01,290 - INFO -   Epochs:   10
2025-12-04 10:46:01,300 - INFO - 
--- Fold 3/5 ---
2025-12-04 10:46:01,300 - INFO - Train: 30,147 samples, Test: 7,597 samples
2025-12-04 10:46:36,451 - INFO - Fold 3: Early stopping at epoch 9
2025-12-04 10:46:36,809 - INFO - Fold 3 Results:
2025-12-04 10:46:36,809 - INFO -   AUC-ROC:  0.4946
2025-12-04 10:46:36,809 - INFO -   Accuracy: 0.4940
2025-12-04 10:46:36,809 - INFO -   F1 Score: 0.3752
2025-12-04 10:46:36,809 - INFO -   Epochs:   9
2025-12-04 10:46:36,828 - INFO - 
--- Fold 4/5 ---
2025-12-04 10:46:36,828 - INFO - Train: 30,147 samples, Test: 7,597 samples
